아래는 “Notion 일기 → 감정 분류 → GitHub 프로필 상태 업데이트” GitHub Action 앱의 PRD(Product Requirement Document) 초안입니다.  

---

## 1. 개요  
**제품명**: diary emotion action
**목표**:  
- 사용자의 Notion 일기에서 감정(Emotion)을 자동으로 추출하고, 이를 바탕으로 GitHub 프로필 상태(이모지+메시지)를 주기적으로(크론 스케줄) 업데이트한다.  
- 감정 분류 모델과 GitHub API를 결합한 간단하고 확장성 있는 워크플로우를 제공하여, 개발자 프로필에 현재 기분을 반영한다.

---

## 2. 주요 사용자(페르소나)  
1. **개발자 A**  
   - 매일 Notion에 짧게 일기 작성  
   - 자신의 GitHub 프로필에 기분(기쁨/슬픔 등)을 자동으로 표시하고 싶음  
2. **팀 리드 B**  
   - 팀원들의 상태를 한눈에 파악할 수 있는 대시보드 구축을 목표로 함  
   - 개인별 GitHub 상태를 모아볼 수 있는 기반을 마련하고자 함  

---

## 3. 기능 요구사항  

| 구분 | ID  | 요구사항 내용                                                                                 |
|----|-----|---------------------------------------------------------------------------------------------|
| **데이터 연동**  | FR-01 | Notion API를 통해 지정된 데이터베이스(일기)에서 최근 `n`건의 페이지를 조회한다.                         |
|                | FR-02 | 일기 페이지에서 `Date`(작성일)와 `Content`(본문)을 추출한다.                                          |
| **감정 분석**     | FR-03 | Hugging Face `circulus/koelectra-emotion-v1` 또는 유사 모델로 본문 텍스트의 감정 레이블(7개) 및 신뢰도(score)를 분석한다. 이때 최근 10개 데이터를 이용해 감정을 분석한다.|
| **상태 매핑**     | FR-04 | 감정 레이블별 이모지(😄, 😢, 😐 등)와 메시지(“Feeling good!”, “Feeling blue…” 등)를 매핑한다.           |
| **GitHub 업데이트** | FR-05 | GitHub GraphQL `changeUserStatus` 뮤테이션을 호출하여 프로필 상태를 설정한다.                           |
| **스케줄링**     | FR-06 | GitHub Actions `schedule`(cron) 이벤트로 매일/매시간/사용자 지정 간격 실행을 지원한다.                  |
| **로그·모니터링**  | FR-07 | Action 실행 결과(성공/실패), 감정 분석 결과(라벨·신뢰도), GitHub API 응답 상태를 로그로 남긴다.             |
| **설정 UI (선택)** | FR-08 | 리포지토리 Settings 페이지에서 “일기 건수(n)”, “스케줄 간격(cron)”, “모델 종류”를 입력할 수 있는 환경변수 가이드 문서를 제공한다. |

---

## 4. 비기능 요구사항  

| 구분        | 요구사항 내용                                                    |
|-----------|----------------------------------------------------------------|
| **보안**     | - Notion API 토큰, GitHub 토큰을 GitHub Secrets에 안전하게 저장·관리할 것.   |
| **성능**     | - 일기 건수가 10건 이내일 경우 30초 이내 실행 완료.                      |
| **확장성**   | - 필요 시 감정 모델(`model=` 파라미터) 및 매핑 테이블을 쉽게 교체 가능해야 함. |
| **신뢰성**   | - 실패 시 3회 재시도(retry), 실패 리포트(PR 코멘트 또는 Slack 전송) 기능.  |
| **운영성**   | - Action 버전 관리 및 태깅(`v1.0.0`) 정책 수립.                           |
| **문서화**   | - README.md에 설치·설정·사용 가이드와 예제 워크플로우를 포함할 것.            |

---

## 5. 시스템 구성 & 기술 스택  

```mermaid
flowchart LR
  A[GitHub Actions<br/>(cron)] --> B[Runner (ubuntu-latest)]
  B --> C[Checkout & Setup Python]
  C --> D[update_status.py 실행]
  D --> E[Notion API 호출]
  E --> F[감정 분석(pipeline)]
  F --> G[이모지·메시지 매핑]
  G --> H[GitHub GraphQL 호출]
  H --> I[로그 수집 및 알림(optional)]
```

- **워크플로우 정의**: GitHub Actions (`.github/workflows/sentiment-status.yml`)  
- **스크립트 언어**: Python 3.11
- **주요 라이브러리**:  
  - `notion-client` (Notion SDK)  
  - `transformers` (Hugging Face)  
  - `requests` (HTTP 호출)  
- **CI 환경**: `ubuntu-latest` Runner  
- **모델**: `circulus/koelectra-emotion-v1` (라벨: 7 emotions)  

---

## 6. 개발 및 출시 일정(예시)  

| 단계           | 기간 (주) | 산출물                                        |
|--------------|--------|---------------------------------------------|
| 요구분석 & 설계   | 1      | PRD, API 설계서, 워크플로우 다이어그램                   |
| PoC 개발       | 1      | Python 스크립트 (update_status.py), 기본 워크플로우 구성    |
| 시범 운영 & 테스트 | 1      | 테스트 리포트 (성능, 예외 케이스), GitHub Actions 실행 로그  |
| 문서화 & 릴리즈  | 0.5    | README.md, 릴리즈 태그(`v1.0.0`), 사용자 가이드            |
| 모니터링 & 개선  | 지속     | 사용자 피드백 반영, 기능 개선, 모델 교체 옵션 추가          |

---

## 7. 성공 지표(KPI)  
- **정확성**: 감정 분석 결과와 실제 사용자 기분 일치율 ≥ 85%  
- **가동률**: 주간 실행 성공률 ≥ 99%  
- **응답 시간**: Action 전체 실행 시간 ≤ 60초  

---

이 PRD를 기반으로 PoC를 진행하고, 이후 필요한 세부 API 스펙·테스트 케이스를 정의하면 빠른 개발이 가능할 것입니다. 추가 요구나 조정사항이 있으면 알려주세요!